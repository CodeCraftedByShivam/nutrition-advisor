<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard - Nutrition Advisor</title>
  <link rel="stylesheet" href="dashboard-style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="logo">
        <h2>ü•ó Nutrition Advisor</h2>
      </div>
      <div class="nav-items">
        <span id="welcomeText">Welcome!</span>
        <button onclick="logout()" class="btn btn-outline">Logout</button>
      </div>
    </div>
  </nav>

  <!-- Dashboard Content -->
  <div class="dashboard">
    <div class="container">
      
      <!-- Stats Cards -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">üî•</div>
          <div class="stat-info">
            <h3 id="caloriesCount">0</h3>
            <p>Calories Today</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üçé</div>
          <div class="stat-info">
            <h3 id="mealsCount">0</h3>
            <p>Meals Logged</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üéØ</div>
          <div class="stat-info">
            <h3 id="goalProgress">0%</h3>
            <p>Daily Goal</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üìà</div>
          <div class="stat-info">
            <h3 id="streakCount">0</h3>
            <p>Day Streak</p>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <h2>Quick Actions</h2>
        <div class="actions-grid">
          <button onclick="showAddMealModal()" class="action-btn">
            <span class="action-icon">üçΩÔ∏è</span>
            <span>Log Meal</span>
          </button>
          <button onclick="showNutritionAnalysis()" class="action-btn">
            <span class="action-icon">üìä</span>
            <span>View Analysis</span>
          </button>
          <button onclick="showGoalSetting()" class="action-btn">
            <span class="action-icon">üéØ</span>
            <span>Set Goals</span>
          </button>
          <button onclick="showProfile()" class="action-btn">
            <span class="action-icon">üë§</span>
            <span>My Profile</span>
          </button>
        </div>
      </div>

      <!-- Recent Meals -->
      <div class="recent-section">
        <h2>Today's Meals</h2>
        <div id="recentMeals" class="meals-list">
          <div class="empty-state">
            <p>No meals logged today. Start by adding your first meal!</p>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Add Meal Modal -->
<!-- Add Meal Modal -->
<div id="addMealModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <h2>Log Your Meal</h2>
    <form id="addMealForm" class="meal-form">
      <div class="form-group">
        <label>Meal Type:</label>
        <select name="mealType" required>
          <option value="">Select meal type</option>
          <option value="breakfast">Breakfast</option>
          <option value="lunch">Lunch</option>
          <option value="dinner">Dinner</option>
          <option value="snack">Snack</option>
        </select>
      </div>
      
      <div class="form-group">
        <label>Search Food:</label>
        <input type="text" id="foodSearch" placeholder="e.g., Paneer, Rice, Dal, Apple" autocomplete="off" />
        <div id="foodSuggestions" class="suggestions"></div>
        <input type="hidden" name="foodId" id="selectedFoodId" />
        <input type="hidden" name="foodName" id="selectedFoodName" />
      </div>
      
      <div class="form-group">
        <label>Quantity:</label>
        <input type="text" name="quantity" placeholder="e.g., 1 cup, 200g, 2 rotis" required />
      </div>
      
      <div id="nutritionPreview" class="nutrition-preview" style="display:none;">
        <h4>Nutrition Info (per 100g):</h4>
        <div class="nutrition-grid">
          <span>Calories: <strong id="previewCalories">-</strong></span>
          <span>Protein: <strong id="previewProtein">-</strong>g</span>
          <span>Carbs: <strong id="previewCarbs">-</strong>g</span>
          <span>Fat: <strong id="previewFat">-</strong>g</span>
        </div>
      </div>
      
      <button type="submit" class="btn btn-primary btn-full">Add Meal</button>
    </form>
    <p id="mealMessage" class="message"></p>
  </div>
</div>
        
        <button type="submit" class="btn btn-primary btn-full">Add Meal</button>
      </form>
      <p id="mealMessage" class="message"></p>
    </div>
  </div>

  <!-- Nutrition Analysis Modal -->
<div id="analysisModal" class="modal">
  <div class="modal-content analysis-modal">
    <span class="close" onclick="closeAnalysisModal()">&times;</span>
    <h2>üìä Nutrition Analysis</h2>
    
    <!-- Date Filter -->
    <div class="analysis-filters">
      <label>Time Period:</label>
      <select id="periodFilter" onchange="loadAnalysis()">
        <option value="today">Today</option>
        <option value="week">This Week</option>
        <option value="month">This Month</option>
      </select>
    </div>
    
    <!-- Stats Overview -->
    <div class="analysis-stats">
      <div class="analysis-stat">
        <span class="stat-number" id="totalCaloriesAnalysis">0</span>
        <span class="stat-label">Total Calories</span>
      </div>
      <div class="analysis-stat">
        <span class="stat-number" id="avgCaloriesAnalysis">0</span>
        <span class="stat-label">Daily Average</span>
      </div>
      <div class="analysis-stat">
        <span class="stat-number" id="totalMealsAnalysis">0</span>
        <span class="stat-label">Meals Logged</span>
      </div>
    </div>
    
    <!-- Charts Container -->
    <div class="charts-container">
      <!-- Macros Pie Chart -->
      <div class="chart-section">
        <h3>Macronutrient Breakdown</h3>
        <canvas id="macrosChart" width="300" height="300"></canvas>
      </div>
      
      <!-- Daily Progress Chart -->
      <div class="chart-section">
        <h3>Daily Calorie Trend</h3>
        <canvas id="caloriesChart" width="400" height="200"></canvas>
      </div>
    </div>
    
    <!-- Recommendations -->
    <div class="recommendations">
      <h3>üí° Insights & Recommendations</h3>
      <div id="recommendationsList">
        <p>Loading recommendations...</p>
      </div>
    </div>
  </div>
</div>
<!-- User Profile Modal -->
<div id="profileModal" class="modal">
  <div class="modal-content profile-modal">
    <span class="close" onclick="closeProfileModal()">&times;</span>
    <h2>üë§ My Profile & Goals</h2>
    
    <!-- Profile Tabs -->
    <div class="profile-tabs">
      <button class="tab-btn active" onclick="switchTab('personal')">Personal Info</button>
      <button class="tab-btn" onclick="switchTab('goals')">Goals & Preferences</button>
    </div>
    
    <!-- Personal Information Tab -->
    <div id="personalTab" class="tab-content active">
      <form id="personalInfoForm" class="profile-form">
        <div class="form-row">
          <div class="form-group">
            <label>Full Name:</label>
            <input type="text" name="fullName" id="fullName" placeholder="Your full name" required />
          </div>
          <div class="form-group">
            <label>Age:</label>
            <input type="number" name="age" id="age" placeholder="25" min="13" max="100" required />
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Gender:</label>
            <select name="gender" id="gender" required>
              <option value="">Select gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label>Height (cm):</label>
            <input type="number" name="height" id="height" placeholder="170" min="100" max="250" required />
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Current Weight (kg):</label>
            <input type="number" name="weight" id="weight" placeholder="70" min="30" max="300" step="0.1" required />
          </div>
          <div class="form-group">
            <label>Activity Level:</label>
            <select name="activityLevel" id="activityLevel" required>
              <option value="">Select activity level</option>
              <option value="sedentary">Sedentary (little/no exercise)</option>
              <option value="light">Light (1-3 days/week)</option>
              <option value="moderate">Moderate (3-5 days/week)</option>
              <option value="active">Active (6-7 days/week)</option>
              <option value="very_active">Very Active (2x/day, intense)</option>
            </select>
          </div>
        </div>
      </form>
    </div>
    
    <!-- Goals & Preferences Tab -->
    <div id="goalsTab" class="tab-content">
      <form id="goalsForm" class="profile-form">
        <div class="form-row">
          <div class="form-group">
            <label>Primary Goal:</label>
            <select name="primaryGoal" id="primaryGoal" required>
              <option value="">Select your goal</option>
              <option value="lose_weight">Lose Weight</option>
              <option value="maintain_weight">Maintain Weight</option>
              <option value="gain_weight">Gain Weight</option>
              <option value="build_muscle">Build Muscle</option>
              <option value="improve_health">Improve Health</option>
            </select>
          </div>
          <div class="form-group">
            <label>Target Weight (kg):</label>
            <input type="number" name="targetWeight" id="targetWeight" placeholder="65" min="30" max="300" step="0.1" />
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>Diet Preference:</label>
            <select name="dietPreference" id="dietPreference">
              <option value="none">No specific diet</option>
              <option value="vegetarian">Vegetarian</option>
              <option value="vegan">Vegan</option>
              <option value="keto">Ketogenic</option>
              <option value="paleo">Paleo</option>
              <option value="mediterranean">Mediterranean</option>
              <option value="low_carb">Low Carb</option>
            </select>
          </div>
          <div class="form-group">
            <label>Weekly Weight Goal:</label>
            <select name="weeklyGoal" id="weeklyGoal">
              <option value="0">Maintain current weight</option>
              <option value="-0.25">Lose 0.25 kg/week</option>
              <option value="-0.5">Lose 0.5 kg/week</option>
              <option value="-0.75">Lose 0.75 kg/week</option>
              <option value="-1">Lose 1 kg/week</option>
              <option value="0.25">Gain 0.25 kg/week</option>
              <option value="0.5">Gain 0.5 kg/week</option>
            </select>
          </div>
        </div>
        
        <div class="form-group">
          <label>Health Conditions:</label>
          <textarea name="healthConditions" id="healthConditions" placeholder="Any allergies, medical conditions, or dietary restrictions..." rows="3"></textarea>
        </div>
      </form>
    </div>
    
    <!-- Calculated Goals Display -->
    <div id="calculatedGoals" class="goals-display" style="display:none;">
      <h3>üìä Your Personalized Goals</h3>
      <div class="goals-grid">
        <div class="goal-item">
          <span class="goal-number" id="dailyCalories">0</span>
          <span class="goal-label">Daily Calories</span>
        </div>
        <div class="goal-item">
          <span class="goal-number" id="dailyProtein">0g</span>
          <span class="goal-label">Protein</span>
        </div>
        <div class="goal-item">
          <span class="goal-number" id="dailyCarbs">0g</span>
          <span class="goal-label">Carbs</span>
        </div>
        <div class="goal-item">
          <span class="goal-number" id="dailyFat">0g</span>
          <span class="goal-label">Fat</span>
        </div>
      </div>
    </div>
    
    <!-- Action Buttons -->
    <div class="profile-actions">
      <button type="button" onclick="calculateGoals()" class="btn btn-outline">Calculate Goals</button>
      <button type="button" onclick="saveProfile()" class="btn btn-primary">Save Profile</button>
    </div>
    
    <p id="profileMessage" class="message"></p>
  </div>
</div>

<script src="config.js"></script>
  <script src="dashboard-script.js"></script>
</body>
</html>
